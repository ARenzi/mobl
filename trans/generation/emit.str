module generation/emit

strategies

  emit =
    ?code
    ; current := <Emitted <+ !"">
    ; rules ( Emitted := <concat-strings> [current, code] )

  emit-tl-statement =
    ?stat
    ; current := <EmittedStatements <+ ![]>
    ; rules ( EmittedStatements := <concat> [current, [stat]] )

  get-all =
       Emitted
       ; rules ( Emitted := "")
    <+ !""

  get-all-tl-statements =
       EmittedStatements
       ; rules ( EmittedStatements := [])
    <+ ![]